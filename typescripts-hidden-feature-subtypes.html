<!DOCTYPE html>
<html>
  <head>
    <title>Tim Johns - TypeScript's Hidden Feature: Subtypes</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="TypeScript allows you to make subtypes without any extra libraries or tools needed. You can have types for positive integers, non-empty strings, any much more.">
    <meta name="author" content="Tim Johns">
    

    <meta property="og:site_name" content="Tim Johns">
    <meta property="og:title" content="TypeScript's Hidden Feature: Subtypes">
    <meta property="og:url" content="https://timjohns.ca/typescripts-hidden-feature-subtypes.html">
    <meta property="og:description" content="TypeScript allows you to make subtypes without any extra libraries or tools needed. You can have types for positive integers, non-empty strings, any much more.">
    
    <meta property="og:image" content="https://timjohns.ca./images/blog/typescript_subtypes.png">
    
    
    <meta property="og:type" content="article">
    

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&family=Inter:wght@300;400;500&family=Lato:wght@300;400;700;900&family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />

    <!-- Analytics -->
    <script src="https://cdn.counter.dev/script.js" data-id="af659f42-a2fc-40d5-8e6c-a1036c76c51f" data-utcoffset="-4"></script>

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="canonical" href="https://timjohns.ca/typescripts-hidden-feature-subtypes.html">
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/default.css" />
    <link rel="stylesheet" href="./css/nav.css" />
	<link rel="stylesheet" href="./css/vs2015.css" />
	
    <link rel="stylesheet" href="./css/post.css" />
	
  </head>
  <body>
	<header>
	  <div>
		<a href="/" id="logo">
          <img alt="logo" src="./images/logo.svg"/>
		</a>
		<a href="#" id="toggle-menu" aria-label="Main Menu">
		  <svg width="100" height="100" viewBox="0 0 100 100">
			<path class="line line1" d="M 20,29.000046 H 80.000231 C 80.000231,29.000046 94.498839,28.817352 94.532987,66.711331 94.543142,77.980673 90.966081,81.670246 85.259173,81.668997 79.552261,81.667751 75.000211,74.999942 75.000211,74.999942 L 25.000021,25.000058" />
			<path class="line line2" d="M 20,50 H 80" />
			<path class="line line3" d="M 20,70.999954 H 80.000231 C 80.000231,70.999954 94.498839,71.182648 94.532987,33.288669 94.543142,22.019327 90.966081,18.329754 85.259173,18.331003 79.552261,18.332249 75.000211,25.000058 75.000211,25.000058 L 25.000021,74.999942" />
		  </svg>
		</a>
	  </div>
	  <nav class="collapsed">
		<ul>
		  <li><a href="/" >Home</a></li>
		  <li><a href="/mentorship.html" >Mentorship</a></li>
		  <li><a href="/events.html" >Events</a></li>
		  <li><a href="/blog.html"  class="active" >Blog</a></li>
		  <li><a href="/projects.html" >Projects</a></li>
		  <li><a href="/about.html" >About</a></li>
		  <li><a href="/contact.html" >Contact</a></li>
		</ul>
	  </nav>
	</header>
    <main>
  <article id="blog-post">
    <header>
      <h1 class="writing">
        TypeScript's Hidden Feature: Subtypes
      </h1>
      <p class="writing">Dec  6, 2023</p>
      
    </header>
	<img class="post-image" alt="" src="./images/blog/typescript_subtypes.png" />
    <section class="content writing">
	  <p>This is a really cool thing in TypeScript I’ve been exploring recently. It turns out you can make <strong>subtypes</strong> without any extra libraries or tools! And the code to do it is <em>really easy</em>.</p>
<p>Imagine you could finally have types for <strong>positive integers</strong> or <strong>non-empty strings</strong> where you need them:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> PositiveInteger <span class="op">=</span> <span class="op">???</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> NonEmptyString <span class="op">=</span> <span class="op">???</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Product <span class="op">=</span> {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> NonEmptyString</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  priceCents<span class="op">:</span> PositiveInteger</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> addToCart <span class="op">=</span> (product<span class="op">:</span> Product<span class="op">,</span> quantity<span class="op">:</span> PositiveInteger<span class="op">,</span> cart<span class="op">:</span> Cart) <span class="kw">=&gt;</span> Cart {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// add a product, not having to worry about the quantity being a negative number or 0</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Then you wouldn’t have to handle weird edge-cases like a product with an empty name, or a quantity that’s fractional or negative.</p>
<p>You could even strictly accept pre-validated parameters:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> ValidName <span class="op">=</span> <span class="op">???</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> ValidBirthYear <span class="op">=</span> <span class="op">???</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">// This function will only accept a valid name and birth year.</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> register <span class="op">=</span> (name<span class="op">:</span> ValidName<span class="op">,</span> birthYear<span class="op">:</span> ValidBirthYear)<span class="op">:</span> <span class="dt">void</span> <span class="kw">=&gt;</span> {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Registering user &quot;</span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">&quot; born in </span><span class="sc">${</span>birthYear<span class="sc">}</span><span class="vs">.`</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h1 id="what-are-subtypes">What are subtypes?</h1>
<p>In simple terms, a subtype is when you narrow down a type to be more specific.</p>
<p>In logical terms, <em>B</em> is a subtype of <em>A</em> when all <em>Bs</em> are <em>As</em>. For example, all cats are mammals. So, <em>Cat</em> is a subtype of <em>Mammal</em>. And <em>Mammal</em> is a subtype of <em>Animal</em>. <em>Prime number</em> is a subtype of <em>Natural number</em>. You get the picture.</p>
<p>You can think of making a subtype of type <em>A</em> by choosing a certain property that some <em>As</em> may have. This means <em>B</em> is a subtype of <em>A</em> defined by some predicate over <em>A</em>. In other words, any value of type <em>A</em> can be of type <em>B</em> if it has that chosen property. If this sounds complicated, don’t worry—it will make more sense in a moment.</p>
<h1 id="-the-code-">✨ The code ✨</h1>
<h2 id="subtype-positive-number">Subtype: Positive Number</h2>
<p>Starting with an example, this is how you can make a subtype for positive numbers:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> A <span class="op">=</span> <span class="dt">number</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> PositiveNumber <span class="op">=</span> A <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isPositiveNumber <span class="op">=</span> (x<span class="op">:</span> A)<span class="op">:</span> x <span class="kw">is</span> PositiveNumber <span class="kw">=&gt;</span> {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">&gt;=</span> <span class="dv">1</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> x<span class="op">:</span> A <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isPositiveNumber</span>(x)) {</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y<span class="op">:</span> PositiveNumber <span class="op">=</span> x</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;y:&#39;</span><span class="op">,</span> y)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Looks weird, right? I’ll break it down line by line.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> A <span class="op">=</span> <span class="dt">number</span></span></code></pre></div>
<p>You don’t really need this line; I added it for clarity. This is just making <code>A</code> a type alias for <code>number</code>. When you’re making a subtype of some custom type (instead of a primitive type), <code>A</code> would be that custom type.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> PositiveNumber <span class="op">=</span> A <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span></code></pre></div>
<p>This is the weirdest line you have to write. This makes a new type <code>PositiveNumber</code>, defined as the type <code>A</code> along with a new property with a unique symbol. Everything about the added property is to prevent you from being able to make a value of type <code>PositiveNumber</code> directly, while retaining the original properties of type <code>A</code>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> You don’t need to worry about exactly how this works. The cool thing is, this line doesn’t change! Anytime you make a subtype, you can write this line the same way (substituting <code>A</code> for the (super)type of your choice). Notice that this line doesn’t actually say anything about what a positive number is; it just gives the subtype a name. This line should always be paired with a predicate function:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isPositiveNumber <span class="op">=</span> (x<span class="op">:</span> A)<span class="op">:</span> x <span class="kw">is</span> PositiveNumber <span class="kw">=&gt;</span> {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">&gt;=</span> <span class="dv">1</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This is where the meaning of <code>PositiveNumber</code> is actually defined. More than that, without this function, you can’t even make a <code>PositiveNumber</code> value!<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> This is using TypeScript’s feature of <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates">type predicates</a>. You can think of this function as returning a normal boolean value, though TypeScript gives it special treatment that brings this all together:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> x<span class="op">:</span> A <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isPositiveNumber</span>(x)) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y<span class="op">:</span> PositiveNumber <span class="op">=</span> x</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;y:&#39;</span><span class="op">,</span> y)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This is where things get really interesting. Like I said, the only way to make a <code>PositiveNumber</code> value is to invoke the <code>isPositiveNumber</code> predicate function on some value <code>x</code> of type <code>A</code>. And the only place where TypeScript will accept that you can actually have a <code>PositiveNumber</code> value is in the scope where <code>isPositiveNumber(x)</code> returned <code>true</code>. The way I think of it, you need to use the predicate function to provide a <strong>proof</strong> that you have a value of your subtype. After all, your subtype is defined by that predicate. So in this code, <code>y</code> is allowed to be of type <code>PositiveNumber</code> if you set it to <code>x</code> in scope of where <code>isPositiveNumber(x)</code> returned <code>true</code>.</p>
<h2 id="shorter-version">Shorter Version</h2>
<p>In practice, I would write and use the <code>PositiveNumber</code> subtype a little differently:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> PositiveNumber <span class="op">=</span> <span class="dt">number</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isPositiveNumber <span class="op">=</span> (x<span class="op">:</span> A)<span class="op">:</span> x <span class="kw">is</span> PositiveNumber <span class="kw">=&gt;</span> {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">&gt;=</span> <span class="dv">1</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> x<span class="op">:</span> A <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isPositiveNumber</span>(x)) {</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;x:&#39;</span><span class="op">,</span> x)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>All I’ve done is remove the superfluous <code>A</code> type alias and the <code>y</code> variable. In the scope where <code>x</code> has been proven to be a positive number, <code>x</code> itself can be of type <code>PositiveNumber</code>. In fact, <code>x</code> can be treated as being a <code>number</code> or a <code>PositiveNumber</code> within that context.</p>
<h2 id="general-subtype-template">General Subtype Template</h2>
<p>The general structure for making and using a subtype looks like this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> A <span class="op">=</span> {} <span class="co">// some specific type</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> B <span class="op">=</span> A <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isB <span class="op">=</span> (x<span class="op">:</span> A)<span class="op">:</span> x <span class="kw">is</span> B <span class="kw">=&gt;</span> {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// return a boolean value</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">true</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> x<span class="op">:</span> A <span class="op">=</span> {} <span class="co">// some value of type A</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isB</span>(x)) {</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> y<span class="op">:</span> B <span class="op">=</span> x</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;y:&#39;</span><span class="op">,</span> y)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h1 id="why-does-this-matter">Why does this matter?</h1>
<p>If you’re not yet convinced of the usefulness of subtypes, reflect on why you’re using TypeScript in the first place: you want to have a type checker catch any obvious mistakes during compile-time as opposed to you discovering them later during runtime. You want to make sure the data you’re working with conforms to the types you’ve decided it should. Why not extend that notion to even more useful types? Do you really think a general <strong>number</strong> type is the best case for any numeric scenario? Surely a <strong>non-negative number</strong> or a <strong>whole number</strong> would be better for many cases.</p>
<p>And if you’re <em>still</em> not convinced, maybe the next two sections will change your mind.</p>
<h1 id="you-can-test-subtypes">You can test subtypes!</h1>
<p>Maybe you’re worried your predicate function doesn’t define your subtype correctly. Not a problem! You can always treat the predicate function as if it returns a normal boolean and write tests for it.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> ValidBirthYear <span class="op">=</span> <span class="dt">number</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isValidBirthYear <span class="op">=</span> (year<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> year <span class="kw">is</span> ValidBirthYear <span class="kw">=&gt;</span> {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> thisYear<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">getFullYear</span>()</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> year <span class="op">&gt;=</span> <span class="dv">1900</span> <span class="op">&amp;&amp;</span> year <span class="op">&lt;=</span> thisYear</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Tests for ValidBirthYear:&#39;</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">isValidBirthYear</span>(<span class="dv">1900</span>))</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="op">!</span><span class="fu">isValidBirthYear</span>(<span class="dv">1800</span>))</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">isValidBirthYear</span>(<span class="dv">2023</span>))</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="op">!</span><span class="fu">isValidBirthYear</span>(<span class="dv">2100</span>))</span></code></pre></div>
<h1 id="more-examples">More examples</h1>
<p>I want to finish off with a bunch of pragmatic examples to show some different ways of how you might use subtypes in your own projects.</p>
<h2 id="nonnegativeinteger">NonNegativeInteger</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> NonNegativeInteger <span class="op">=</span> <span class="dt">number</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isNonNegativeInteger <span class="op">=</span> (x<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> x <span class="kw">is</span> NonNegativeInteger <span class="kw">=&gt;</span> {</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">!</span>(x <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">&amp;&amp;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(x) <span class="op">===</span> x</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> betterRepeat <span class="op">=</span> (s<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> n<span class="op">:</span> NonNegativeInteger)<span class="op">:</span> <span class="dt">string</span> <span class="kw">=&gt;</span> {</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> s<span class="op">.</span><span class="fu">repeat</span>(n)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ex1<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isNonNegativeInteger</span>(ex1)) {</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This will run.</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">betterRepeat</span>(<span class="st">&#39;hello&#39;</span><span class="op">,</span> ex1))</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ex2<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="fl">3.1</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isNonNegativeInteger</span>(ex2)) {</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This won&#39;t run.</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">betterRepeat</span>(<span class="st">&#39;hello&#39;</span><span class="op">,</span> ex2))</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ex3<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="op">-</span><span class="dv">3</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isNonNegativeInteger</span>(ex3)) {</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This won&#39;t run.</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">betterRepeat</span>(<span class="st">&#39;hello&#39;</span><span class="op">,</span> ex3))</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>In the third example usage, where <code>ex3</code> is <code>-3</code>, normally giving a negative number to the String.prototype.repeat() function would produce a runtime error. Instead, we caught it in compile-time and prevented it from happening at all!</p>
<h2 id="nonemptyarray">NonEmptyArray</h2>
<p>Non-empty arrays are very useful in functional programming.</p>
<p>Normally, functions like head() and last() would return <code>undefined</code> when given an empty array, breaking the type rules:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> head <span class="op">=</span> <span class="op">&lt;</span>T<span class="op">&gt;</span>(xs<span class="op">:</span> <span class="bu">Array</span><span class="op">&lt;</span>T<span class="op">&gt;</span>)<span class="op">:</span> T <span class="kw">=&gt;</span> xs[<span class="dv">0</span>]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> last <span class="op">=</span> <span class="op">&lt;</span>T<span class="op">&gt;</span>(xs<span class="op">:</span> <span class="bu">Array</span><span class="op">&lt;</span>T<span class="op">&gt;</span>)<span class="op">:</span> T <span class="kw">=&gt;</span> xs[xs<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> arrEmpty<span class="op">:</span> <span class="bu">Array</span><span class="op">&lt;</span><span class="dt">number</span><span class="op">&gt;</span> <span class="op">=</span> []</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;head(arrEmpty):&#39;</span><span class="op">,</span> <span class="fu">head</span>(arrEmpty)) <span class="co">// undefined</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;last(arrEmpty):&#39;</span><span class="op">,</span> <span class="fu">last</span>(arrEmpty)) <span class="co">// undefined</span></span></code></pre></div>
<p>We can make better versions with a <code>NonEmptyArray</code> subtype:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> NonEmptyArray<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">=</span> <span class="bu">Array</span><span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isNonEmptyArray <span class="op">=</span> <span class="op">&lt;</span>T<span class="op">&gt;</span>(xs<span class="op">:</span> <span class="bu">Array</span><span class="op">&lt;</span>T<span class="op">&gt;</span>)<span class="op">:</span> xs <span class="kw">is</span> NonEmptyArray<span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="kw">=&gt;</span> {</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> xs<span class="op">.</span><span class="at">length</span> <span class="op">&gt;=</span> <span class="dv">1</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> head <span class="op">=</span> <span class="op">&lt;</span>T<span class="op">&gt;</span>(xs<span class="op">:</span> NonEmptyArray<span class="op">&lt;</span>T<span class="op">&gt;</span>)<span class="op">:</span> T <span class="kw">=&gt;</span> xs[<span class="dv">0</span>]</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> last <span class="op">=</span> <span class="op">&lt;</span>T<span class="op">&gt;</span>(xs<span class="op">:</span> NonEmptyArray<span class="op">&lt;</span>T<span class="op">&gt;</span>)<span class="op">:</span> T <span class="kw">=&gt;</span> xs[xs<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> arr1<span class="op">:</span> <span class="bu">Array</span><span class="op">&lt;</span><span class="dt">number</span><span class="op">&gt;</span> <span class="op">=</span> [<span class="dv">1</span>]</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> arrEmpty<span class="op">:</span> <span class="bu">Array</span><span class="op">&lt;</span><span class="dt">number</span><span class="op">&gt;</span> <span class="op">=</span> []</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isNonEmptyArray</span>(arr1)) {</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;head(arr1):&#39;</span><span class="op">,</span> <span class="fu">head</span>(arr1))</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;last(arr1):&#39;</span><span class="op">,</span> <span class="fu">last</span>(arr1))</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isNonEmptyArray</span>(arrEmpty)) {</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">// None of this will run.</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;head(arrEmpty):&#39;</span><span class="op">,</span> <span class="fu">head</span>(arrEmpty))</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;last(arrEmpty):&#39;</span><span class="op">,</span> <span class="fu">last</span>(arrEmpty))</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="validwardrobe">ValidWardrobe<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></h2>
<p>I like this example because it shows how far you can stretch the predicate function. Which, it turns out, is as far as you want! As long as it returns a boolean in the end, you’re good.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Colour <span class="op">=</span> <span class="st">&#39;white&#39;</span> <span class="op">|</span> <span class="st">&#39;cream&#39;</span> <span class="op">|</span> <span class="st">&#39;blue&#39;</span> <span class="op">|</span> <span class="st">&#39;navy&#39;</span> <span class="co">// ...</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Wardrobe <span class="op">=</span> {</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  owner<span class="op">:</span> {</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    name<span class="op">:</span> <span class="dt">string</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    age<span class="op">:</span> <span class="dt">number</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  tops<span class="op">:</span> Colour[]</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  pants<span class="op">:</span> Colour[]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  shorts<span class="op">:</span> Colour[]</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  skirts<span class="op">:</span> Colour[]</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  desiredNumberOfOutfits<span class="op">:</span> <span class="dt">number</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> ValidWardrobe <span class="op">=</span> Wardrobe <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isValidWardrobe <span class="op">=</span> (wardrobe<span class="op">:</span> Wardrobe)<span class="op">:</span> wardrobe <span class="kw">is</span> ValidWardrobe <span class="kw">=&gt;</span> {</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> numOutfits<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    wardrobe<span class="op">.</span><span class="at">tops</span><span class="op">.</span><span class="at">length</span> <span class="op">*</span> wardrobe<span class="op">.</span><span class="at">pants</span><span class="op">.</span><span class="at">length</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> wardrobe<span class="op">.</span><span class="at">tops</span><span class="op">.</span><span class="at">length</span> <span class="op">*</span> wardrobe<span class="op">.</span><span class="at">shorts</span><span class="op">.</span><span class="at">length</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> wardrobe<span class="op">.</span><span class="at">tops</span><span class="op">.</span><span class="at">length</span> <span class="op">*</span> wardrobe<span class="op">.</span><span class="at">skirts</span><span class="op">.</span><span class="at">length</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> numOutfits <span class="op">&gt;=</span> wardrobe<span class="op">.</span><span class="at">desiredNumberOfOutfits</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> suggestOutfits <span class="op">=</span> (wardrobe<span class="op">:</span> ValidWardrobe)<span class="op">:</span> <span class="dt">void</span> <span class="kw">=&gt;</span> {</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Printing suggested outfits for </span><span class="sc">${</span>wardrobe<span class="op">.</span><span class="at">owner</span><span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">...`</span>)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Do stuff here, knowing that wardrobe has already been validated.</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ex1<span class="op">:</span> Wardrobe <span class="op">=</span> {</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>  owner<span class="op">:</span> {</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    name<span class="op">:</span> <span class="st">&#39;Alice&#39;</span><span class="op">,</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    age<span class="op">:</span> <span class="dv">22</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>  tops<span class="op">:</span> [<span class="st">&#39;blue&#39;</span><span class="op">,</span> <span class="st">&#39;white&#39;</span><span class="op">,</span> <span class="st">&#39;cream&#39;</span>]<span class="op">,</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>  pants<span class="op">:</span> [<span class="st">&#39;navy&#39;</span><span class="op">,</span> <span class="st">&#39;blue&#39;</span>]<span class="op">,</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>  shorts<span class="op">:</span> [<span class="st">&#39;navy&#39;</span>]<span class="op">,</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>  skirts<span class="op">:</span> [<span class="st">&#39;navy&#39;</span><span class="op">,</span> <span class="st">&#39;blue&#39;</span>]<span class="op">,</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>  desiredNumberOfOutfits<span class="op">:</span> <span class="dv">15</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">isValidWardrobe</span>(ex1)) {</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suggestOutfits</span>(ex1)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="validated-form-input">Validated Form Input</h2>
<p>Let’s say you have some input from a user registration form. And you have a <code>register</code> function whose job is to save this user data somewhere. Rather than clouding the concerns of <code>register</code> by validating the user data within the function, you can have it only accept data that has been previously validated!</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> ValidName <span class="op">=</span> <span class="dt">string</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isValidName <span class="op">=</span> (name<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> name <span class="kw">is</span> ValidName <span class="kw">=&gt;</span> name<span class="op">.</span><span class="fu">trim</span>()<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> ValidBirthYear <span class="op">=</span> <span class="dt">number</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isValidBirthYear <span class="op">=</span> (year<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> year <span class="kw">is</span> ValidBirthYear <span class="kw">=&gt;</span> {</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> thisYear<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">getFullYear</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> year <span class="op">&gt;=</span> <span class="dv">1900</span> <span class="op">&amp;&amp;</span> year <span class="op">&lt;=</span> thisYear</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> register <span class="op">=</span> (name<span class="op">:</span> ValidName<span class="op">,</span> birthYear<span class="op">:</span> ValidBirthYear)<span class="op">:</span> <span class="dt">void</span> <span class="kw">=&gt;</span> {</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Registering user with name &quot;</span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">&quot; born in </span><span class="sc">${</span>birthYear<span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> nameInput<span class="op">:</span> <span class="dt">string</span> <span class="op">=</span> <span class="st">&#39;test&#39;</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> birthYearInput<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="dv">1800</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="op">!</span><span class="fu">isValidName</span>(nameInput)) {</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Name cannot be empty&#39;</span>)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (<span class="op">!</span><span class="fu">isValidBirthYear</span>(birthYearInput)) {</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;Invalid birth year&#39;</span>)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">register</span>(nameInput<span class="op">,</span> birthYearInput)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="positiveinteger-nonemptystring">PositiveInteger, NonEmptyString</h2>
<p>You can nest subtypes in other types, too.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> PositiveInteger <span class="op">=</span> <span class="dt">number</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isPositiveInteger <span class="op">=</span> (x<span class="op">:</span> <span class="dt">number</span>)<span class="op">:</span> x <span class="kw">is</span> PositiveInteger <span class="kw">=&gt;</span> {</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">&gt;=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(x) <span class="op">===</span> x</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> NonEmptyString <span class="op">=</span> <span class="dt">string</span> <span class="op">&amp;</span> { <span class="kw">readonly</span> __type<span class="op">:</span> unique <span class="dt">symbol</span> }</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> isNonEmptyString <span class="op">=</span> (s<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> s <span class="kw">is</span> NonEmptyString <span class="kw">=&gt;</span> {</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> s<span class="op">.</span><span class="fu">trim</span>()<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Product <span class="op">=</span> {</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> NonEmptyString</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  priceCents<span class="op">:</span> PositiveInteger</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Cart <span class="op">=</span> {} <span class="co">// Use your imagination</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> addToCart <span class="op">=</span> (product<span class="op">:</span> Product<span class="op">,</span> quantity<span class="op">:</span> PositiveInteger<span class="op">,</span> cart<span class="op">:</span> Cart)<span class="op">:</span> Cart <span class="kw">=&gt;</span> {</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add a product to the cart, not having to worry about the quantity being a negative number or 0.</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> cart</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h1 id="footnotes">Footnotes</h1>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>TypeScript intersections between primitives and objects are enabled to allow for making “branded primitives”, which is intended to allow for nominal typing. See <a href="https://github.com/microsoft/TypeScript/wiki/FAQ#can-i-make-a-type-alias-nominal">TypeScript FAQ</a>. With subtypes, we’re leveraging that feature for an entirely different purpose.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Without using type assertions, which would bypass the type checker altogether.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Based off of my partner’s <a href="https://github.com/Lzduque/personal-stylist">Personal Stylist</a> app.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
    </section>
	<section class="read-more">
	  <a href="/blog.html" class="btn btn-primary">Read More</a>
	</section>
    <section class="newsletter">
      <script async data-uid="3c58182786" src="https://tim-johns.ck.page/3c58182786/index.js"></script>
    </section>
  </article>
</main>

	<footer>
      <div class="newsletter">
        <script async data-uid="907145579d" src="https://tim-johns.ck.page/907145579d/index.js"></script>
      </div>
	  <div class="social-icons">
		<a href="mailto:johns.timf@gmail.com">
		  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"/></svg>
		</a>
		<a href="https://www.linkedin.com/in/tim-johns/" target="_blank">
		  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
		</a>
		<a href="https://github.com/SlimTim10" target="_blank">
		  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
		</a>
		<a href="https://www.instagram.com/slimtim10_/" target="_blank">
		  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>
		</a>
        <a href="/rss.xml">
          <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>
        </a>
	  </div>
	  <small>
		&copy; 2022 Tim Johns. All rights reserved.
	  </small>
	  <small>
		Site proudly generated by
		<a href="http://jaspervdj.be/hakyll" target="_blank">Hakyll</a>
		||
		<a href="https://github.com/SlimTim10/slimtim10.github.io" target="_blank">View source</a>
	  </small>
	  <small>
		Illustrations by
		<a href="https://undraw.co" target="_blank">unDraw</a>
		and Tim Johns
	  </small>
    </footer>
	<script async src="./js/script.js"></script>
  </body>
</html>
